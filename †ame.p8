pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
--init
function _init()

hero = {}
hero.x = 4*8
hero.y = 24
hero.x_dir = 0 --1 >= dir >= -1
hero.y_dir = 0 --1 >= dir >= -1
hero.flip = false
hero.vfall = 0
hero.map_x = 0
hero.map_y = 0
hero.sx = 1 -- speed != 0
hero.sy = 1 -- speed != 0
hero.on_flore = false

end


-->8
--update
function _update()
col = {}
key_control()
col = dist_to_col()
end


-->8
--draw
function _draw()
cls()
map()
print(col.x)
print(col.y)
spr(2,hero.map_x,hero.map_y)
spr(3,hero.map_x+8,hero.map_y)
spr(18,hero.map_x,hero.map_y+8)
spr(19,hero.map_x+8,hero.map_y+8)
_draw_hero()
end

function _draw_hero()
sspr (0,0,16,16,
hero.x,hero.y,16,16,
hero.flip,false)
end
-->8
--movement
function key_control()
hero.x_dir = 0
hero.y_dir = 0

if(btn(0)) then
hero.x_dir = -1
hero.flip = true
 end
 
if(btn(1)) then
hero.x_dir = 1
hero.flip = false
 end
 
if(btn(2)) then
 hero.y_dir = -1
 end
 
if(btn(3)) then
 hero.y_dir = 1
 end
hero_move(move)
end

function hero_move(pos)
hero.x += hero.x_dir*hero.sx
hero.y += hero.y_dir*hero.sy
hero.map_x = 8*flr((hero.x+4)/8)
hero.map_y = 8*flr((hero.y+4)/8)
end
-->8
--colide
function dist_to_col()
local result = {}
local x = (hero.map_x/8)+hero.x_dir
local y = (hero.map_y/8)+hero.y_dir
if(mget(x,y) >= 224) then
 result.x = (x*8)-hero.x
 result.y = (y*8)-hero.x
 end
 return result
end


__gfx__
00000000000000001111111199999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000001111111199999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000fff00000001111111199999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000ffff0000001111111199999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000fff00000001111111199999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000005000000001111111199999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000055500000001111111199999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000111110000001111111199999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000011100000008888888822222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000011100000008888888822222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000011100000008888888822222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000011100000008888888822222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000001000000008888888822222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000011100000008888888822222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00004444444400008888888822222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000100001000008888888822222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
20300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
21310000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
20300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
21310000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
20302030203020302030203020302030203020302030000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
21312131213121312131213121312131213121312131000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000002030203000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000002131213100000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000002030000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000002131000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
20302030203020302030203020302030203020302030000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
21312131213121312131213121312131213121312131000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020
30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000021
31000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
20300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
21310000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
20302030203020302030203020302030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
21312131213121312131213121312131000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
20300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
21310000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
20300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
21310000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
20302030203020302030203020302030203020302030203020302030203020300000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
21312131213121312131213121312131213121312131213121312131213121310000000000000000000000000000000000000000000040405555555555555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555555555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000404040405555555555555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555555555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000404000405555555555555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555555555555
00404040404040404040404040404040405000000000000000000000000000000000000000000000000000000000000000000000001212125555555555555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555555555555
00000010100000000000000000000000415100000000000000000000000000000000000000000000000000000000000000000000000000125555555555555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555555555555
40500111405040504050405040504050405040504050000000000000000000000000000000000000000000000000000000000000000000005555555555555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555555555555
20302030203020302030203020302030203020302030203020302030203020300000000000000000000000000000000000000000000000005555555555555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555555555555
21312131213121312131213121312131213121312131213121312131213121310000000000000000000000000000000000000000000000005555555555555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555555555555
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010100000000000000000000000000000101
__map__
0a0b0405060708090a0b0405060708090a0b0405060708090a0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeefeeefeeefeeefeeefeeefeeefeeefeeefeeef161718191a1b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeffefffefffefffefffefffefffefffefffeff262728292a2b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
feff3435363738393a3b3435363738393a3beeef363738393a3b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeef4445464748494a4b4445464748494a4bfeff464748494a4b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
feff5455565758595a5b5455565758595a5beeef565758595a5b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeef6465666768696a6b0465046768696a6bfeff666768696a6b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
feffeeefeeefeeefeeef040404eeef047a7beeef767778797a7b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
fefffefffefffefffeff040404feff040a0bfeff060708090a0b0405060708090a0b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1b1415161718eeef1b1404041718191a1beeef161718191a1b1415161718191a1b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2a2b2425262728feff2b2425262728292a2bfeff262728292a2b2425262728292a2b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3a3b3435363738eeef3b3435363738393a3beeef363738393a3b3435363738393a3b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4a4b4445464748feff4b4445464748494a4bfeff464748494a4b4445464748494a4b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5a5b5455565758eeefeeefeeefeeefeeefeeffeeef5758595a5b5455565758595a5b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6a6b6465666768fefffefffefffefffefffffffeff6768696a6b6465666768696a6b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7a7b7475767778797a7b7475767778797a7b7475767778797a7b7475767778797a7b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a0b0405060708090a0b0405060708090a0b0405060708090a0b0405060708090a0b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1b1415161718191a1b1415161718191a1b1415161718191a1b1415161718191a1b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2a2b2425262728292a2b2425262728292a2b2425262728292a2b2425262728292a2b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3a3b3435363738393a3b3435363738393a3b3435363738393a3b3435363738393a3b0000000000000000c4c4c40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4a4b4445464748494a4b4445464748494a4b4445464748494a4b4445464748494a4b0000000000000000c4c4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5a5b5455565758595a5b5455565758595a5b5455565758595a5b5455565758595a5b0000000000000000c4c4c4c400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6a6b6465666768696a6b6465666768696a6b6465666768696a6b6465666768696a6b000000000000000000c4c40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7a7b7475767778797a7b7475767778797a7b7475767778797a7b7475767778797a7b00000000000000000000c40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a0b0405060708090a0b0405060708090a0b0405060708090a0b000000000000000000000000000000000000c40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1b1415161718191a1b1415161718191a1b1415161718191a1b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2a2b2425262728292a2b2425262728292a2b2425262728292a2b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3a3b3435363738393a3b3435363738393a3b3435363738393a3b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4a4b4445464748494a4b4445464748494a4b4445464748494a4b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5a5b5455565758595a5b5455565758595a5b5455565758595a5b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6a6b6465666768696a6b6465666768696a6b6465666768696a6b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7a7b7475767778797a7b7475767778797a7b7475767778797a7b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
